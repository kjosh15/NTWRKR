Delivered-To: josh@josh.is
Received: by 2002:a2e:b5af:0:0:0:0:0 with SMTP id f15csp64987ljn;
        Thu, 7 Jan 2021 17:14:28 -0800 (PST)
X-Received: by 2002:a17:906:8255:: with SMTP id f21mr1004741ejx.265.1610068468247;
        Thu, 07 Jan 2021 17:14:28 -0800 (PST)
ARC-Seal: i=1; a=rsa-sha256; t=1610068468; cv=none;
        d=google.com; s=arc-20160816;
        b=yZmL9YemX5v5lZbBmi20rsX6wSpOe8Mg26rwG0x8DxnWqsImoIDhPj7TMhRYDGKFvh
         z7nwEDckkVRahFabYLY6/15+UDLhkR1SNLP8shuyEJDoFyfQoLg9uw2pZbs2XpEUNgRq
         VMVcUDSHS08+z9eSAGVZR3wecOZ2ikUQaq6Tmn06lnUfO+60vEfRipRHiFUAXcgXakCf
         Abh68gfrkAkL2R51iJ7pUjydei+/Fc1THOPa0k7OAjVHx7ets4F4ww8FE0hPajch1Spe
         xBgNqKMmnLmd2hly/eWy8MCV2ChT5qgWB8Ez777N4bWu/AUM7eS7dI/FJGi+w77qNjH+
         nf4w==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=to:subject:message-id:date:from:in-reply-to:references:mime-version
         :dkim-signature;
        bh=pkY9P1e26Ex1vrL4MooGePq5+5dDPM39YjOu2jjuo9Q=;
        b=ivHWv29WBLhRhkXMU7FJ+4W8wlEilNdnRz9xBavZkjE8F3Fb26xUiLr/qaH8KkJryq
         H6okQwdf5l8I5gWUeRZHV0JGguU5Erm5SBjDFEfKAxXJE0UhIhsecOQU/cWxlWMsXfDk
         gd/tkJ3aEG62h8F6wG1ogy1mDU3argKOdZYBl6vtrakuash0P6wF5U4MeepocwYSOZZQ
         x0xPHd04FcLJ4Yi3ScveHvzbEVPN2kcbtRtKmFSxvm//ILq7xCanUnvRfMGoER6+G0Zd
         CIJeIVpo2xw7/6apP0ZjA6myYUQVY8TsiLAz9YBfv1l6UvrTxKnBqF+e8RwhzbqLPDmq
         dG8Q==
ARC-Authentication-Results: i=1; mx.google.com;
       dkim=pass header.i=@gmail.com header.s=20161025 header.b=csoSQxjz;
       spf=pass (google.com: domain of stevebond@gmail.com designates 209.85.220.41 as permitted sender) smtp.mailfrom=stevebond@gmail.com;
       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com
Return-Path: <stevebond@gmail.com>
Received: from mail-sor-f41.google.com (mail-sor-f41.google.com. [209.85.220.41])
        by mx.google.com with SMTPS id s22sor4842939ejj.69.2021.01.07.17.14.28
        for <josh@josh.is>
        (Google Transport Security);
        Thu, 07 Jan 2021 17:14:28 -0800 (PST)
Received-SPF: pass (google.com: domain of stevebond@gmail.com designates 209.85.220.41 as permitted sender) client-ip=209.85.220.41;
Authentication-Results: mx.google.com;
       dkim=pass header.i=@gmail.com header.s=20161025 header.b=csoSQxjz;
       spf=pass (google.com: domain of stevebond@gmail.com designates 209.85.220.41 as permitted sender) smtp.mailfrom=stevebond@gmail.com;
       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to;
        bh=pkY9P1e26Ex1vrL4MooGePq5+5dDPM39YjOu2jjuo9Q=;
        b=csoSQxjzG/FoPmDpKPpmf5Vm6bof4O/WHMPk3pny4dXAVdQpkhEwq4D99tTDzMU6/l
         YDL1JlA9QNOUShH5Z6KlsNfrh4tjY+cEi33mME7623pGLTC4cpg2tD5I8+ksA41adIXV
         IfU+gPgs/rwuyeeRrSN6eGGXdgG9FNUesNI8g77Xui4Sykx1YbwutjLFYvOMO6+jEu8P
         zPf4gpkJTZ9JJOL9AwpN1E/rUY47WxX2ozIeZnCgnSYwATR6jedfXIG9WxNTcu3KxmMu
         toRUkh76YimrIvxM8VTW3lNoxcI/VpqS8FnVEY5y8iotkoLDVvyoRE+b99Jgws9tB/EW
         bFng==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:references:in-reply-to:from:date
         :message-id:subject:to;
        bh=pkY9P1e26Ex1vrL4MooGePq5+5dDPM39YjOu2jjuo9Q=;
        b=sANDMCvJc/qG9GHMDioA7tpIjirw2F+W4k3QcpBb/ealLOckTUqNg7QkfyZz1hRDnm
         FI078nrthWwjcJ969qII8JOf/oII8GN2vtZWdUyDHRc2KJZ4Zx54pvkORqwvhkWpwgcg
         9ue3NJGLS4LvlPXB9CXGRkzFi3Uw6ylndXi07juZdBdnTFSflI71mdCBlHTVD7R3KmW/
         oBCg1c+Y6HFXhlTdh3JZFcuviUSA52wF8HnXue8Y0zfWTTbP0rzfFHpLYxLAthJ7cboG
         MsV3XFa9NMWB8qJ3VigNNGMVuzdQztbAltpjRghvg0dmlp5vnDNlXVBBlyBcVafB0x2a
         C8pA==
X-Gm-Message-State: AOAM533FFfCP0fYkNQOtTnuAUWKP011kal31KYIlMyy7SL7UmBdR4IxL
	9ItW9Y4EWMtAhUgu7z4x7Rth9f9fwCpts69G+dGvKz7jmaM=
X-Google-Smtp-Source: ABdhPJzeMHC9K3cLAWGRCuMVdPzutzQEJ/P8CM5DKRylPMu0Un93dqli28D7acl7Q7oofcJqBSwex/U9ZbNkh5qvIKk=
X-Received: by 2002:a17:906:a2d0:: with SMTP id by16mr995237ejb.207.1610068467510;
 Thu, 07 Jan 2021 17:14:27 -0800 (PST)
MIME-Version: 1.0
References: <CAAdG8PgTS1dBhvjeniyj+-grWqOkJiL2RvdgpkZF+X8HC_xqwg@mail.gmail.com>
 <CACNgykM+CeasPNg3fy+GoOOWaVDfjXsiDerWSsV1=6LsWe0wNg@mail.gmail.com>
In-Reply-To: <CACNgykM+CeasPNg3fy+GoOOWaVDfjXsiDerWSsV1=6LsWe0wNg@mail.gmail.com>
From: Steve Bond <stevebond@gmail.com>
Date: Thu, 7 Jan 2021 17:14:07 -0800
Message-ID: <CAAdG8PgwzJ=JS1dfJb8JGY-y0_qkqr-BVurvVfzvRCPc72zsiQ@mail.gmail.com>
Subject: Re: Preliminary power save results
To: Josh Klein <josh@josh.is>
Content-Type: multipart/alternative; boundary="00000000000011f21805b859477e"

--00000000000011f21805b859477e
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

I'm not sure why I have a different number. I looked over my notes which
showed that an idle Arduino UNO consumes 45mA, and that we were pulling
47mA, showing that our software costs 1-2 mA to run.

Now I'm showing a pull of 53mA. The ONLY difference is that I ran my
isolated ammeter from a battery pack when I did our first tests and I ran
it from a bench power supply for this test.

That shouldn't matter, but it's POSSIBLE I ran the ammeter from a 12v
battery pack back in Woodinville and ran it at 7.5V from the bench power
supply here. Again, that shouldn't matter unless the ammeter isn't supposed
to work at 7.5 volts and I just forgot how much power I gave it in
Woodinville. I'll make sure to check this.

Sounds like we will not get under 35mA on an Arduino UNO. I got it down to
38 today with just some basic sleep stuff but we are still paying overhead
for the onboard power LED and the voltage regulator, etc. So we're pretty
much at the max savings. The only way to save more power is to burn out the
surface-mount LED with a soldering iron and cut PCB traces that lead to the
voltage regulator, brown out detector, and other subcircuits. I don't think
we should ever recommend people do any of these things.

To save more energy we'd have to change the board we are using. If we built
a Crowbox around an Arduino NANO we'd drop to 19mA with NO sleep work. So
we could cleave consumption in half just by changing the board. Nanos run
lean so we wouldn't be able to get down much lower than that even with
sleep mode.

We didn't use Nanos for a couple of reasons. One reason is that if you buy
the cheap ones and don't read what you're getting, you get a board which
needs to have its header pins soldered on. No big deal for hobbyists but
for amateurs this would be a disaster. UNOs always come with headers
installed, even the cheap ones.

The other reason is that we'd need to plug the Nano into a breadboard and
run wires breadboard-to-breadboard and we agreed that the labeled header
pins on an Arduino UNO made for more positive targets for amateur builders,
reducing potential wiring errors.

So, there we are.

On Thu, Jan 7, 2021 at 1:14 PM Josh Klein <josh@josh.is> wrote:

> You caught me, just!
>
> Huh; what do you think accounts for the increased power draw?
>
> I=E2=80=99d be curious if anyone online has done a side-by-side of the
> rocketscream vs the official library: could that save you some trouble?
>
> Last thing is I=E2=80=99m stoked to see what the voltaic does. Could be a=
 real
> game changer, esp. in conjunction with the power savings you=E2=80=99re f=
inding!
>
> - J
>
>
> On Thu, Jan 7, 2021 at 9:03 PM Steve Bond <stevebond@gmail.com> wrote:
>
>> Trying to get this to you before you go to bed there in Iceland. Not sur=
e
>> if I succeeded.
>>
>>
>> So, I'm getting idle current draws at 53mA. My tests back in Woodinville
>> showed 47mA. I don't know why the data is different but right now we're
>> pulling 53mA.
>>
>> With the low power library and putting the Crowbox to sleep with the A/D
>> Converter switched off and the Brownout Detector switched off, consumpti=
on
>> goes down to 38mA. That is 15mA saved going down from 38 from 53. That's
>> about 29% savings.
>>
>> Here are options moving forward:
>>
>> -Explore more shit to disable while the Arduino sleeps
>>
>> -I found an official Arduino low power library (versus the Rocketscream
>> library I'm using now). It's designed to save energy on some of the newe=
r
>> energy-hogging Arduinos but I'm going to write a quick version of CrOS t=
o
>> work with this library as well and see if there's a way to push this dow=
n
>> more.
>>
>> My Voltaic stuff came today. The power bank is cool. The 2W solar panel
>> is smaller than I expected. Smaller than two smartphones side-by-side. T=
he
>> 3W panel is the same width and one more set of cells tall. So, if we hav=
e
>> to use a 3W panel, at least it's not much bigger. I'll do some output te=
sts
>> on the panel later but probably not today.
>>
>> -Steve
>>
>>
>>
>>

--00000000000011f21805b859477e
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">I&#39;m not sure why I have a different number. I looked o=
ver my notes which showed that an idle Arduino UNO consumes 45mA, and that =
we were pulling 47mA, showing that our software costs 1-2 mA to run.=C2=A0<=
div><br></div><div>Now I&#39;m showing a pull of 53mA. The ONLY difference =
is that I ran my isolated ammeter from a battery pack when I did our first =
tests and I ran it from a bench power supply for this test.=C2=A0</div><div=
><br></div><div>That shouldn&#39;t matter, but it&#39;s POSSIBLE I ran the =
ammeter from a 12v battery pack back in Woodinville and ran it at 7.5V from=
 the bench power supply here. Again, that shouldn&#39;t matter unless the a=
mmeter isn&#39;t supposed to work at 7.5 volts and I just forgot how much p=
ower I gave it in Woodinville. I&#39;ll make sure to check this.</div><div>=
<br></div><div>Sounds like we will not get under 35mA on an Arduino UNO. I =
got it down to 38 today with just some basic sleep stuff but we are still p=
aying overhead for the onboard power LED and the voltage regulator, etc. So=
 we&#39;re pretty much at the max savings. The only way to save more power =
is to burn out the surface-mount LED with a soldering iron and cut PCB trac=
es that lead to the voltage regulator, brown out detector, and other subcir=
cuits. I don&#39;t think we should ever recommend people do any of these th=
ings.</div><div><br></div><div>To save more energy we&#39;d have to change =
the board we are using. If we built a Crowbox around an Arduino NANO we&#39=
;d drop to 19mA with NO sleep work. So we could cleave consumption in half =
just by changing the board. Nanos run lean so we wouldn&#39;t be able to ge=
t down much lower than that even with sleep mode.</div><div><br></div><div>=
We didn&#39;t use Nanos for a couple of reasons. One reason is that if you =
buy the cheap ones and don&#39;t read what you&#39;re getting, you get a bo=
ard which needs to have its header pins soldered on. No big deal for hobbyi=
sts but for amateurs this would be a disaster. UNOs always come with header=
s installed, even the cheap ones.</div><div><br></div><div>The other reason=
 is that we&#39;d need to plug the Nano into a breadboard and run wires bre=
adboard-to-breadboard and we agreed that the labeled header pins on an Ardu=
ino UNO made for more positive targets for amateur builders, reducing poten=
tial wiring errors.<br><div><br></div></div><div>So, there we are.</div></d=
iv><br><div class=3D"gmail_quote"><div dir=3D"ltr" class=3D"gmail_attr">On =
Thu, Jan 7, 2021 at 1:14 PM Josh Klein &lt;<a href=3D"mailto:josh@josh.is">=
josh@josh.is</a>&gt; wrote:<br></div><blockquote class=3D"gmail_quote" styl=
e=3D"margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);paddin=
g-left:1ex"><div dir=3D"auto">You caught me, just!</div><div dir=3D"auto"><=
br></div><div dir=3D"auto">Huh; what do you think accounts for the increase=
d power draw?</div><div dir=3D"auto"><br></div><div dir=3D"auto">I=E2=80=99=
d be curious if anyone online has done a side-by-side of the rocketscream v=
s the official library: could that save you some trouble?</div><div dir=3D"=
auto"><br></div><div dir=3D"auto">Last thing is I=E2=80=99m stoked to see w=
hat the voltaic does. Could be a real game changer, esp. in conjunction wit=
h the power savings you=E2=80=99re finding!</div><div dir=3D"auto"><br></di=
v><div dir=3D"auto">- J</div><div dir=3D"auto"><br></div><div><br><div clas=
s=3D"gmail_quote"><div dir=3D"ltr" class=3D"gmail_attr">On Thu, Jan 7, 2021=
 at 9:03 PM Steve Bond &lt;<a href=3D"mailto:stevebond@gmail.com" target=3D=
"_blank">stevebond@gmail.com</a>&gt; wrote:<br></div><blockquote class=3D"g=
mail_quote" style=3D"margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204=
,204,204);padding-left:1ex"><div dir=3D"ltr">Trying to get this to you befo=
re you go to bed there in Iceland. Not sure if I succeeded.<div><br></div><=
div><br></div><div>So, I&#39;m getting idle current draws at 53mA. My tests=
 back in Woodinville showed 47mA. I don&#39;t know why the data is differen=
t but right now we&#39;re pulling 53mA.</div><div><br></div><div>With the l=
ow power library and putting the Crowbox to sleep with the A/D Converter sw=
itched off and the Brownout Detector switched off, consumption goes down to=
 38mA. That is 15mA saved going down from 38 from 53. That&#39;s about 29% =
savings.=C2=A0</div><div><br></div><div>Here are options moving forward:</d=
iv><div><br></div><div>-Explore more shit to disable while the Arduino slee=
ps</div><div><br></div><div>-I found an official Arduino low power library =
(versus the Rocketscream library I&#39;m using now). It&#39;s designed to s=
ave energy on some of the newer energy-hogging Arduinos but I&#39;m going t=
o write a quick version of CrOS to work with this library as well and see i=
f there&#39;s a way to push this down more.</div><div><br></div><div>My Vol=
taic stuff came today. The power bank is cool. The 2W solar panel is smalle=
r than I expected. Smaller than two smartphones side-by-side. The 3W panel =
is the same width and one more set of cells tall. So, if we have to use a 3=
W panel, at least it&#39;s not much bigger. I&#39;ll do some output tests o=
n the panel later but probably not today.</div></div><div dir=3D"ltr"><div>=
<br></div><div>-Steve</div><div><br></div><div><br></div><div><br></div></d=
iv>
</blockquote></div></div>
</blockquote></div>

--00000000000011f21805b859477e--
